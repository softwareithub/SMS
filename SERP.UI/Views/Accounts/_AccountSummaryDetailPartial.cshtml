@model IEnumerable<SERP.Core.Entities.Accounts.AccountSummaryModel>
@{
    decimal currentBalance = default;
}

<link href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>

<section class="content">
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12">
                    <table id="tblDataList" class="table table-striped table-bordered responsive" style="width:100%">
                        <thead>
                            <tr>
                                <th>Account Name</th>
                                <th>Opening</th>
                                <th>Income Transaction</th>
                                <th>Expense Transaction</th>
                                <th>Net Expense Amount</th>
                                <th>
                                    Net Income Amount
                                </th>
                                <th>Current Balance</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var data in Model)
                            {

                                <tr>
                                    <td>
                                        @data.AccountName
                                    </td>
                                    <td>
                                        @data.OpeningBalance
                                    </td>
                                    <td>
                                        @data.TotalIncomeTransactionCount
                                    </td>
                                    <td>
                                        @data.TotalExpenseTransactionCount
                                    </td>
                                    <td>
                                        @data.NetExpenseAmount
                                    </td>
                                    <td>
                                        @data.NetIncomeAmount
                                    </td>
                                    <td>
                                        @{
                                            currentBalance = (data.OpeningBalance + data.NetIncomeAmount) - data.NetExpenseAmount;
                                        }
                                        @currentBalance
                                    </td>
                                </tr>
                            }
                        </tbody>

                    </table>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
    $(document).ready(function () {
        $("#tblDataList").DataTable({
            fixedHeader: true,
            select: true,
            responsive: true
        });
    })
</script>